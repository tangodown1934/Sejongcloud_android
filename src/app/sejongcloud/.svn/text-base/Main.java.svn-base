package exam.AndroidFirst;

import java.io.BufferedReader;
import java.io.ByteArrayInputStream;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.nio.Buffer;
import java.util.jar.Attributes;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.apache.http.HttpResponse;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONObject;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NamedNodeMap;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.XMLReader;
import org.xml.sax.helpers.DefaultHandler;


import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.app.TabActivity;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.graphics.Color;
import android.graphics.drawable.Drawable;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Handler;
import android.os.Looper;
import android.os.Message;
import android.util.Log;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.Window;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TabHost;
import android.widget.TabHost.OnTabChangeListener;
import android.widget.TabHost.TabSpec;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.TabHost.TabContentFactory;
import android.content.Intent;

public class Main extends TabActivity{
	private TabHost tabHost;

    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.main); 
        
        //tabHost=getTabHost();
        tabHost=getTabHost();
        tabHost.setup();
        tabHost.getTabWidget().setDividerDrawable(R.drawable.tab_divider);
        
        setupTab(new TextView(this), "공지",new Intent(this,Tab2.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP),
        		getResources().getDrawable(R.drawable.tab2));
        setupTab(new TextView(this), "모임",new Intent(this,Tab1.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP),
        		getResources().getDrawable(R.drawable.tab1));
        setupTab(new TextView(this), "도서관",new Intent(this,Tab5.class),
        		getResources().getDrawable(R.drawable.tab5));
        setupTab(new TextView(this), "지도",new Intent(this,Tab4SchoolFood.class),
        		getResources().getDrawable(R.drawable.tab4));
        setupTab(new TextView(this), "소개",new Intent(this,Tab3.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP),
        		getResources().getDrawable(R.drawable.tab3));
        int bol=getIntent().getIntExtra("bol", 0);
        if(bol==1){
        	tabHost.setCurrentTab(1);
        }else{
         	tabHost.setCurrentTab(0);
        }
        
    }
    private void setupTab(final View view, final String tag,Intent intent,Drawable drawable)
    {
        View tabview= createTabView(tabHost.getContext(), tag, drawable);
        TabSpec setContent = tabHost.newTabSpec(tag).setIndicator(tabview).setContent(intent);
        tabHost.addTab(setContent);
    }
 
    private static View createTabView(final Context context, final String text,Drawable drawable)
    {
        View  view = LayoutInflater.from(context).inflate(R.layout.tabs_bg, null);
		TextView tv = (TextView) view.findViewById(R.id.tabsText);
		tv.setText(text);
		ImageView iv=(ImageView) view.findViewById(R.id.tabsImage);
		iv.setImageDrawable(drawable);
		
        return view;
    }
}
